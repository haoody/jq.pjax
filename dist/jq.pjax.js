!function(d){function t(t,e,n){return n=u(e,n),this.on("click.pjax",t,function(t){var e=n;e.container||((e=d.extend({},n)).container=d(this).attr("data-pjax")),a(t,e)})}function a(t,e,n){n=u(e,n);var a=t.currentTarget,r=d(a);if("A"!==a.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(1<t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||location.protocol!==a.protocol||location.hostname!==a.hostname||-1<a.href.indexOf("#")&&c(a)==c(location)||t.isDefaultPrevented())){var i={url:a.href,container:r.attr("data-pjax"),target:a},o=d.extend({},i,n),s=d.Event("pjax:click");r.trigger(s,[o]),s.isDefaultPrevented()||(f(o),t.preventDefault(),r.trigger("pjax:clicked",[o]))}}function e(t,e,n){n=u(e,n);var a=t.currentTarget,r=d(a);if("FORM"!==a.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var i={type:(r.attr("method")||"GET").toUpperCase(),url:r.attr("action"),container:r.attr("data-pjax"),target:a};if("GET"!==i.type&&void 0!==window.FormData)i.data=new FormData(a),i.processData=!1,i.contentType=!1;else{if(r.find(":file").length)return;i.data=r.serializeArray()}f(d.extend({},i,n)),t.preventDefault()}function f(c){c=d.extend(!0,{},d.ajaxSettings,f.defaults,c),d.isFunction(c.url)&&(c.url=c.url());var u=w(c.url).hash,t=d.type(c.container);if("string"!==t)throw"expected string value for 'container' option; got "+t;var a,l=c.context=d(c.container);if(!l.length)throw"the container selector '"+c.container+"' did not match anything";function p(t,e,n){n||(n={}),n.relatedTarget=c.target;var a=d.Event(t,n);return l.trigger(a,e),!a.isDefaultPrevented()}c.data||(c.data={}),d.isArray(c.data)?c.data.push({name:"_pjax",value:c.container}):c.data._pjax=c.container,c.beforeSend=function(t,e){if("GET"!==e.type&&(e.timeout=0),t.setRequestHeader("X-PJAX","true"),t.setRequestHeader("X-PJAX-Container",c.container),!p("pjax:beforeSend",[t,e]))return!1;0<e.timeout&&(a=setTimeout(function(){p("pjax:timeout",[t,c])&&t.abort("timeout")},e.timeout),e.timeout=0);var n=w(e.url);u&&(n.hash=u),c.requestUrl=j(n)},c.complete=function(t,e){a&&clearTimeout(a),p("pjax:complete",[t,e,c]),p("pjax:end",[t,c])},c.error=function(t,e,n){var a="";t.getResponseHeader("X-PJAX-ERROR")&&(a=t.responseText);var r=T(a,t,c);if(r.contents)h(l,r,c,u);else{var i=p("pjax:error",[t,e,n,c]);"GET"==c.type&&"abort"!==e&&i&&m(r.url)}},c.success=function(t,e,n){var a=f.state,r="function"==typeof d.pjax.defaults.version?d.pjax.defaults.version():d.pjax.defaults.version,i=n.getResponseHeader("X-PJAX-Version"),o=T(t,n,c),s=w(o.url);if(u&&(s.hash=u,o.url=s.href),r&&i&&r!==i)m(o.url);else if(o.contents){if(f.state={id:c.id||g(),url:o.url,title:o.title,container:c.container,fragment:c.fragment,timeout:c.timeout},(c.push||c.replace)&&window.history.replaceState(f.state,o.title,o.url),d.contains(l,document.activeElement))try{document.activeElement.blur()}catch(t){}o.title&&(document.title=o.title),p("pjax:beforeReplace",[o.contents,c],{state:f.state,previousState:a}),h(l,o,c,u),p("pjax:success",[t,e,n,c])}else m(o.url)},f.state||(f.state={id:g(),url:window.location.href,title:document.title,container:c.container,fragment:c.fragment,timeout:c.timeout},window.history.replaceState(f.state,document.title)),x(f.xhr),f.options=c;var e=f.xhr=d.ajax(c);return 0<e.readyState&&(c.push&&!c.replace&&(function(t,e){E[t]=e,P.push(t),R(S,0),R(P,f.defaults.maxCacheLength)}(f.state.id,[c.container,y(l)]),window.history.pushState(null,"",c.requestUrl)),p("pjax:start",[e,c]),p("pjax:send",[e,c])),f.xhr}function h(t,e,n,a){t.html(e.contents);var r=t.find("input[autofocus], textarea[autofocus]").last()[0];r&&document.activeElement!==r&&r.focus(),function(t){if(!t)return;var a=d("script[src]");t.each(function(){var t=this.src;if(!a.filter(function(){return this.src===t}).length){var e=document.createElement("script"),n=d(this).attr("type");n&&(e.type=n),e.src=d(this).attr("src"),document.head.appendChild(e)}})}(e.scripts);var i=n.scrollTo;if(a){var o=decodeURIComponent(a.slice(1)),s=document.getElementById(o)||document.getElementsByName(o)[0];s&&(i=d(s).offset().top)}"number"==typeof i&&d(window).scrollTop(i)}function n(t,e){var n={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return f(d.extend(n,u(t,e)))}function m(t){window.history.replaceState(null,"",f.state.url),window.location.replace(t)}var p=!0,v=window.location.href,r=window.history.state;function i(t){p||x(f.xhr);var e,n=f.state,a=t.state;if(a&&a.container){if(p&&v==a.url)return;if(n){if(n.id===a.id)return;e=n.id<a.id?"forward":"back"}var r=E[a.id]||[],i=r[0]||a.container,o=d(i),s=r[1];if(o.length){n&&function(t,e,n){var a,r;E[e]=n,r="forward"===t?(a=P,S):(a=S,P);a.push(e),(e=r.pop())&&delete E[e];R(a,f.defaults.maxCacheLength)}(e,n.id,[i,y(o)]);var c=d.Event("pjax:popstate",{state:a,direction:e});o.trigger(c);var u={id:a.id,url:a.url,container:i,push:!1,fragment:a.fragment,timeout:a.timeout,scrollTo:!1};if(s){o.trigger("pjax:start",[null,u]),(f.state=a).title&&(document.title=a.title);var l=d.Event("pjax:beforeReplace",{state:a,previousState:n});o.trigger(l,[s,u]),o.html(s),o.trigger("pjax:end",[null,u])}else f(u);o[0].offsetHeight}else m(location.href)}p=!1}function o(t){var e=d.isFunction(t.url)?t.url():t.url,n=t.type?t.type.toUpperCase():"GET",a=d("<form>",{method:"GET"===n?"GET":"POST",action:e,style:"display:none"});"GET"!==n&&"POST"!==n&&a.append(d("<input>",{type:"hidden",name:"_method",value:n.toLowerCase()}));var r=t.data;if("string"==typeof r)d.each(r.split("&"),function(t,e){var n=e.split("=");a.append(d("<input>",{type:"hidden",name:n[0],value:n[1]}))});else if(d.isArray(r))d.each(r,function(t,e){a.append(d("<input>",{type:"hidden",name:e.name,value:e.value}))});else if("object"==typeof r){var i;for(i in r)a.append(d("<input>",{type:"hidden",name:i,value:r[i]}))}d(document.body).append(a),a.submit()}function x(t){t&&t.readyState<4&&(t.onreadystatechange=d.noop,t.abort())}function g(){return(new Date).getTime()}function y(t){var e=t.clone();return e.find("script").each(function(){this.src||d._data(this,"globalEval",!1)}),e.contents()}function j(t){return t.search=t.search.replace(/([?&])(_pjax|_)=[^&]*/g,"").replace(/^&/,""),t.href.replace(/\?($|#)/,"$1")}function w(t){var e=document.createElement("a");return e.href=t,e}function c(t){return t.href.replace(/#.*/,"")}function u(t,e){return t&&e?((e=d.extend({},e)).container=t,e):d.isPlainObject(t)?t:{container:t}}function l(t,e){return t.filter(e).add(t.find(e))}function b(t){return d.parseHTML(t,document,!0)}function T(t,e,n){var a,r,i={},o=/<html/i.test(t),s=e.getResponseHeader("X-PJAX-URL");if(i.url=s?j(w(s)):n.requestUrl,o){r=d(b(t.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));var c=t.match(/<head[^>]*>([\s\S.]*)<\/head>/i);a=null!=c?d(b(c[0])):r}else a=r=d(b(t));if(0===r.length)return i;if(i.title=l(a,"title").last().text(),n.fragment){var u=r;"body"!==n.fragment&&(u=l(u,n.fragment).first()),u.length&&(i.contents="body"===n.fragment?u:u.contents(),i.title||(i.title=u.attr("title")||u.data("title")))}else o||(i.contents=r);return i.contents&&(i.contents=i.contents.not(function(){return d(this).is("title")}),i.contents.find("title").remove(),i.scripts=l(i.contents,"script[src]").remove(),i.contents=i.contents.not(i.scripts)),i.title&&(i.title=d.trim(i.title)),i}r&&r.container&&(f.state=r),"state"in window.history&&(p=!1);var E={},S=[],P=[];function R(t,e){for(;t.length>e;)delete E[t.shift()]}function s(){return d("meta").filter(function(){var t=d(this).attr("http-equiv");return t&&"X-PJAX-VERSION"===t.toUpperCase()}).attr("content")}function A(){d.fn.pjax=t,d.pjax=f,d.pjax.enable=d.noop,d.pjax.disable=C,d.pjax.click=a,d.pjax.submit=e,d.pjax.reload=n,d.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:s},d(window).on("popstate.pjax",i)}function C(){d.fn.pjax=function(){return this},d.pjax=o,d.pjax.enable=A,d.pjax.disable=d.noop,d.pjax.click=d.noop,d.pjax.submit=d.noop,d.pjax.reload=function(){window.location.reload()},d(window).off("popstate.pjax",i)}d.event.props&&d.inArray("state",d.event.props)<0?d.event.props.push("state"):"state"in d.Event.prototype||d.event.addProp("state"),d.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),d.support.pjax?A():C()}(jQuery);